{% extends "ui/collections/base.html" %}
{% load thumbnail ui_tags %}

{% block parent %}
<div id="parent">
<a href="{{ parent.links.html }}"><span class="label label-default">{{ parent.id }}</span></a>
<a href="{{ parent.links.html }}">{{ parent.title|safe }}</a>
</div>
{% endblock %}

{% block title %}
{{ object.id }} {% if object.title %}&mdash;{% endif %} {{ object.title|safe }}
{% endblock %}

{% block pagetitle %}
<span class="label label-default">{{ object.id }}</span>
{{ object.title|safe }}
{% endblock %}

{% block breadcrumbs %}{{ block.super }}
{% breadcrumbs object.breadcrumbs %}
{% endblock breadcrumbs %}

{% block content %}

<section id="shop" class="container">

    <div class="row">
        <!-- left content -->
        <div class="col-sm-7 col-md-7">
            <h2>{{ object.title|safe }}</h2>

<!--
templatekey: {{ templatekey }}
template:    {{ template }}
-->
{% if object.links.img %}
  {% thumbnail object.links.thumb "480x480" as img %}
        <a href="{{ object.links.img }}" class="lightbox img-thumbnail" data-plugin-options="{"type":"image"}">
          <img src="{{ img.url }}" class="img-responsive">
        </a><br />
  {% endthumbnail %}

  {% if signature %}
            <p>
              <a href="{{ signature.links.img }}" class="btn btn-default btn-xs">
                <i class="fa fa-download"></i>
                Download large
                ({{ signature.access_size|filesizeformat }})
              </a>
              <a href="{{ signature.links.download }}" class="btn btn-default btn-xs">
                <i class="fa fa-download"></i>
                Download full-size
                ({{ signature.size|filesizeformat }})
              </a>
            </p>
  {% endif %}

{% rightspanel object.rights %}

{% endif %}{# object.links.img #}
        </div>
        <!-- right meta -->
        <div class="col-sm-5 col-md-5">

            {% addthis %}

            <div class="desc productDescription">
                <!-- entity.partner -->
                <h3 class="page-header">PARTNER</h3>
                    {% include "ui/partnerlogolink.html" %}
                    <!-- entity.entity_id -->
                    <h3 class="page-header">OBJECT ID</h3>
                    <p>
                    {{ object.id }}
                    {% if object.alternate_id != None %}
                      {% if "denshouid" in object.alternate_id %}
                      <span class="small">(Legacy UID: {{ object.alternate_id|legacydenshouid }})</span>
                      {% else %}
                      <span class="small">({{ object.alternate_id }})</span>
                      {% endif %}
                    {% endif %}
                    
                    </p>
                    <!-- entity.collection -->
                    <h3 class="page-header">PARENT COLLECTION</h3>
                    <p>
                    <a href="{{ parent.links.html }}">{{ parent.title }}</a>
                    </p>
                    <!-- entity.description -->
                    <h3 class="page-header">DESCRIPTION</h3>
                    {{ object.description|safe|linebreaks }}

                    <!-- core meta -->
                    <div class="row">
                        <div class="col-md-5 col-sm-5">
                            <!-- entity.creation -->
                            <h3 class="page-header">DATE</h3>
                            <p>
                                {{ object.creation }}
                            </p>
                        </div>
                        <div class="col-md-7 col-sm-7">
                            <!-- entity.location -->
                            <h3 class="page-header">LOCATION</h3>
                            <p>
                              <a href="{% url "ui-search-results" %}?fulltext=location:{{ object.location }}">
                                {{ object.location }}
                              </a>
                            </p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5 col-sm-5">
                            <!-- entity.genre -->
                            <h3 class="page-header">OBJECT GENRE</h3>
                            <p>
                              <a href="{% url "ui-search-results" %}{{ object.genre.query }}">
                                {{ object.genre.label }}
                              </a>
                            </p>
                        </div>
                        <div class="col-md-7 col-sm-7">
                            <!-- entity.format -->
                            <h3 class="page-header">OBJECT FORMAT</h3>
                            <p>
                              <a href="{% url "ui-search-results" %}{{ object.format.query }}">
                                {{ object.format.label }}
                              </a>
                            </p>
                        </div>
                    </div>
                    <div class="row">    
                        <div class="col-md-5 col-sm-5">
                            <!-- entity.topic_terms -->
                            <h3 class="page-header">TOPICS</h3>
                            <ul class="list-unstyled">
                              {% for item in object.topics %}
                              <li>
                                <a href="{% url "ui-browse-term" "topics" item.id %}">
                                  {{ item.term_node }}</a>
                              </li>
                              {% endfor %}
                            </ul>
                        </div>
                        <div class="col-md-7 col-sm-7">
                            <!-- entity.facility -->
                            <h3 class="page-header">FACILITY</h3>
                            <ul class="list-unstyled">
                              {% for item in object.facility %}
                              <li>
                                <a href="{% url "ui-browse-term" "facility" item.id %}">{{ item.term }}</a>
                              </li>
                              {% endfor %}
                            </ul>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5 col-sm-5">
                            <!-- entity.creators -->
                            <h3 class="page-header">CREATORS</h3>
                            <ul class="list-unstyled">
                              {% for item in object.creators %}
                              <li>
                                <a href="{% url "ui-search-results" %}?fulltext=creators:{{ item.namepart }}">
                                  {{ item.namepart }} ({{ item.role }})
                                </a>
                              </li>
                              {% endfor %}
                            </ul>
                        </div>
                        <div class="col-md-7 col-sm-7">
                            <!-- entity.persons -->
                            <h3 class="page-header">PERSONS/ORGANIZATIONS</h3>
                            <ul class="list-unstyled">
                              {% for item in object.persons %}
                              <li>{{ item }}</li>
                              {% endfor %}
                            </ul>
                        </div>
                    </div>
                    <!-- /core meta -->	
                    <h3 class="page-header">CONTRIBUTOR</h3>
                    <p>
                        {{ object.contributor }}
                    </p>
                    <!-- entity.credit -->
                    <h3 class="page-header">PREFERRED CITATION</h3>
                    <p>
                        {{ object.credit }}
                    </p>
                    <!-- entity.rights -->
                    <h3 class="page-header">RIGHTS</h3>
                    <p>
                      {% rightsbadge object.rights %}
                    </p>

                </div>	
            </div>
    </div>

{% if children_page.object_list %}
    <div class="row">
        <div class="col-sm-12 col-md-12">
          <h3>
            <a href="{% url "ui-object-children" object.id %}">
              {{ children_paginator.count }} Objects
            </a>
          </h3>

          {% for file in children_page.object_list %}
          {% document file %}
          {% endfor %}

          {% if children_paginator.count > 10 %}
          <br />
          <p>
            <a class="btn btn-primary btn-md" href="{% url "ui-object-children" object.id %}">See all objects <i class="fa fa-arrow-circle-right"></i></a>
          </p>
          {% endif %}
        </div><!-- end list col -->
    </div><!-- .row -->
{% endif %}{# children_page.object_list #}

{% if nodes_page.object_list %}
    <div class="row">
        <div class="col-sm-12 col-md-12">
          <h3>
            <a href="{% url "ui-object-nodes" object.id %}">
              {{ nodes_paginator.count }} Files
            </a>
          </h3>

          {% for file in nodes_page.object_list %}
          {% listitem file %}
          {% endfor %}

          {% if nodes_paginator.count > 10 %}
          <br />
          <p>
            <a class="btn btn-primary btn-md" href="{% url "ui-object-nodes" object.id %}">See all files <i class="fa fa-arrow-circle-right"></i></a>
          </p>
          {% endif %}
        </div><!-- end list col -->
    </div><!-- .row -->
{% endif %}{# nodes_page.object_list #}

    <div class="row">
        <div class="col-sm-12 col-md-12 text-muted text-right">
            <small><a class="api" href="{{ api_url }}">API</a></small>
        </div>
    </div><!-- .row -->
  
</section>
{% endblock content %}

{% block footer %}
{% if object.backend_url %}&bull; <a href="{{ object.backend_url }}">json</a>{% endif %}
{% endblock footer %}
